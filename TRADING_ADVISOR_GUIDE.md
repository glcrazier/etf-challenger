# 智能交易建议功能说明

## 功能概述

`etf suggest` 命令通过综合分析多项技术指标，为ETF提供买入/卖出/持有建议。

## 分析方法

### 技术指标（7项）

1. **均线交叉 (权重: 20%)**
   - 金叉：MA5上穿MA20 → 买入信号
   - 死叉：MA5下穿MA20 → 卖出信号
   - 多头排列：MA5 > MA20 → 看涨
   - 空头排列：MA5 < MA20 → 看跌

2. **RSI相对强弱指标 (权重: 15%)**
   - RSI < 30：超卖，买入机会
   - RSI < 20：严重超卖，强烈买入
   - RSI > 70：超买，卖出信号
   - RSI > 80：严重超买，强烈卖出

3. **MACD动能指标 (权重: 20%)**
   - MACD金叉：上穿信号线 → 买入
   - MACD死叉：下穿信号线 → 卖出
   - MACD在零轴上方 → 多头市场
   - MACD在零轴下方 → 空头市场

4. **布林带 (权重: 15%)**
   - 价格触及下轨 → 超卖，买入
   - 价格触及上轨 → 超买，卖出
   - 价格在中轨附近 → 中性

5. **趋势分析 (权重: 15%)**
   - 线性回归斜率 > 0 → 上升趋势
   - 近20日涨幅 > 5% → 强势上涨
   - 线性回归斜率 < 0 → 下降趋势

6. **成交量分析 (权重: 10%)**
   - 放量上涨 → 看涨确认
   - 放量下跌 → 看跌确认
   - 缩量上涨 → 动力不足

7. **溢价率 (权重: 5%)**
   - 折价 < -3% → 低估，买入
   - 溢价 > 3% → 高估，卖出

### 信号生成

综合得分范围：-100 到 +100

- **强烈买入**: 得分 ≥ 60
- **买入**: 得分 ≥ 20
- **持有**: -20 < 得分 < 20
- **卖出**: 得分 ≤ -20
- **强烈卖出**: 得分 ≤ -60

### 价格参考

使用ATR（平均真实波幅）计算：

- **买入建议**:
  - 目标价位 = 当前价 + 2×ATR
  - 止损价位 = 当前价 - ATR

- **卖出建议**:
  - 目标价位 = 当前价 - 2×ATR
  - 止损价位 = 当前价 + ATR

## 使用示例

```bash
# 基于60天数据分析（推荐）
etf suggest 510300

# 基于30天数据（短期交易）
etf suggest 510300 --days 30

# 基于90天数据（中长期）
etf suggest 515880 --days 90
```

## 输出说明

```
╭────────────────────────────────── 交易建议 ──────────────────────────────────╮
│ 华泰柏瑞沪深300ETF (510300)                                                  │
│ 当前价格: 4.711                                                              │
│                                                                              │
│ ➡️ 持有                                                                      │
│ 置信度: 50%                                                                  │
│ 风险等级: 低                                                                 │
╰──────────────────────────────────────────────────────────────────────────────╯

分析依据:
  ✗ 短期均线在长期均线下方，空头排列
  ✗ 处于下降趋势

技术指标状态:
 指标     状态
 均线    看跌 ↘
 RSI     看涨 ↗
 MACD    中性 →
 布林带  看涨 ↗
 趋势    看跌 ↘
 成交量  看跌 ↘

价格参考:
  目标价位: 4.850 (+2.95%)
  止损价位: 4.640 (-1.51%)

⚠️ 风险提示:
  • 本建议仅供参考，不构成投资建议
  • 技术分析存在滞后性，市场随时可能变化
  • 请结合基本面分析和自身风险承受能力做决策
  • 当前风险等级: 低
```

### 输出字段解释

1. **交易建议**: 强烈买入 📈 / 买入 / 持有 ➡️ / 卖出 / 强烈卖出 📉
2. **置信度**: 0-100%，表示信号的强度
3. **风险等级**: 低/中/高（基于波动率）
4. **分析依据**: 关键的看涨/看跌理由
5. **技术指标状态**: 各指标的当前方向
6. **价格参考**: 建议的目标价和止损价

## 适用场景

### 1. 短线交易（--days 30）
- 适合：日内或短期波段交易
- 优势：对短期趋势敏感
- 风险：容易受短期波动影响

### 2. 中期交易（--days 60，默认）
- 适合：波段交易，持仓1-2周
- 优势：平衡短期和中期趋势
- 推荐：大多数投资者

### 3. 中长期交易（--days 90）
- 适合：趋势跟踪，持仓数周至数月
- 优势：过滤短期噪音
- 风险：反应较慢

## 策略建议

### 保守型

- 仅在"强烈买入"时建仓
- 严格设置止损（-3%）
- 目标收益：5-10%

### 稳健型

- "买入"或"强烈买入"时建仓
- 设置止损（-5%）
- 目标收益：10-20%

### 激进型

- "买入"信号即可入场
- 较宽止损（-7%）
- 目标收益：15-30%

## 注意事项

⚠️ **重要提醒**

1. **技术分析的局限性**
   - 不能预测突发事件（政策、黑天鹅等）
   - 在震荡市中信号频繁
   - 在趋势市中有滞后性

2. **建议使用方法**
   - 作为决策参考，不是唯一依据
   - 结合基本面分析
   - 结合市场环境（牛市/熊市/震荡）
   - 考虑个人风险承受能力

3. **风险控制**
   - 必须设置止损
   - 控制仓位（建议单只ETF不超过总资金30%）
   - 分散投资
   - 避免追涨杀跌

4. **数据源限制**
   - akshare数据可能有延迟
   - 溢价率数据可能缺失
   - 成交量数据在某些数据源为0

## 免责声明

本工具提供的交易建议：
- ✗ 不构成投资建议
- ✗ 不保证盈利
- ✗ 不承担投资损失责任

投资者应：
- ✓ 独立判断和决策
- ✓ 充分了解风险
- ✓ 只投资自己理解的产品
- ✓ 做好风险管理

**投资有风险，入市需谨慎！**
