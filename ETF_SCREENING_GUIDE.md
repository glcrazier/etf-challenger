# ETF筛选功能使用指南

## 功能概述

ETF筛选功能帮助你快速找到流动性好、费率低的优质ETF，适合构建投资组合或寻找交易标的。

## 筛选标准

### 1. 流动性指标

**基金规模** (权重70%)
- 规模≥100亿份: 70分 (超大规模)
- 规模≥50亿份: 60分 (大规模)
- 规模≥20亿份: 50分 (中等规模)
- 规模≥10亿份: 40分 (小规模)
- 规模≥5亿份: 30分 (迷你规模)

**平均成交额** (权重30%, 需--with-volume参数)
- ≥10亿元/天: 30分 (非常活跃)
- ≥5亿元/天: 25分 (活跃)
- ≥2亿元/天: 20分 (一般)
- ≥1亿元/天: 15分 (较少)

**流动性评分**: 0-100分，分数越高流动性越好

### 2. 费率标准

**管理费率**(年化)
- 宽基指数ETF: 通常0.50%
- 行业主题ETF: 通常0.60%-0.80%
- 低费率产品: 约0.15%(如科创板50ETF)

默认最大费率: 0.60%

### 3. ETF类型

- 默认只筛选**股票型ETF**
- 自动排除: 货币、债券、理财类ETF

## 使用方法

### 基本用法

```bash
# 使用默认参数(前10支，规模≥5亿，费率≤0.60%)
etf screen

# 指定返回数量
etf screen --top 20

# 调整最小规模
etf screen --min-scale 10  # 只看规模≥10亿的

# 调整费率上限
etf screen --max-fee 0.50  # 只看费率≤0.50%的

# 包含成交量分析(更准确但耗时较长)
etf screen --with-volume
```

### 参数说明

| 参数 | 简写 | 默认值 | 说明 |
|------|------|--------|------|
| --top | -t | 10 | 返回前N支ETF |
| --min-scale | -s | 5.0 | 最小规模(亿份) |
| --max-fee | -f | 0.60 | 最大费率(%) |
| --with-volume | -v | False | 包含成交量分析 |

### 高级用法

```bash
# 寻找超大规模、超低费率的ETF
etf screen --top 5 --min-scale 50 --max-fee 0.50

# 完整分析(包含成交量)
etf screen --top 15 --with-volume

# 寻找中等规模的ETF
etf screen --min-scale 10 --max-fee 0.60 --top 20
```

## 输出解读

### 表格字段

- **排名**: 按流动性评分排序
- **代码**: ETF代码(6位数字)
- **名称**: ETF简称
- **交易所**: SSE(上交所) / SZSE(深交所)
- **规模**: 基金份额(亿份)
- **流动性评分**: 0-100分
- **平均成交额**: 日均成交金额(仅--with-volume时显示)
- **管理人**: 基金管理公司

### 评分等级

- **≥80分**: 🟢 优秀 - 适合大额交易(百万级)
- **60-80分**: 🟡 良好 - 适合中等规模交易(十万级)
- **<60分**: ⚪ 一般 - 建议小额交易(万元级)

### 统计信息

- **总规模**: 筛选出的ETF总份额
- **平均流动性评分**: 平均分数
- **平均成交额**: 日均成交量(需--with-volume)

## 使用场景

### 1. 构建核心持仓

寻找大规模、低费率的宽基指数ETF:

```bash
etf screen --min-scale 50 --max-fee 0.50 --top 10
```

**适合人群**: 长期投资者、定投用户

**推荐标的类型**:
- 沪深300ETF (510300)
- 中证500ETF (510500)
- 上证50ETF (510050)
- 创业板ETF (159915)

### 2. 波段交易

寻找流动性极佳的ETF(可快进快出):

```bash
etf screen --min-scale 20 --with-volume --top 15
```

**适合人群**: 短线交易者

**关注指标**:
- 流动性评分≥90
- 日均成交额≥5亿

### 3. 行业轮动

寻找行业主题ETF:

```bash
etf screen --min-scale 10 --max-fee 0.80 --top 20
```

**适合人群**: 主题投资者

**常见行业**:
- 医药医疗
- 半导体芯片
- 新能源
- 消费
- 金融

### 4. 分散投资

选择不同规模档次的ETF组合:

```bash
# 大盘ETF
etf screen --min-scale 50 --top 5

# 中盘ETF
etf screen --min-scale 10 --top 10

# 合理搭配,分散风险
```

## 筛选结果示例

```
✓ 找到 10 支符合条件的ETF

筛选条件: 最小规模 10.0亿份, 最大费率 0.6%

                     流动性优选ETF
┌──────┬────────┬─────────────┬────────┬────────────┬────────────┬─────────────┐
│ 排名 │ 代码   │ 名称        │ 交易所 │ 规模(亿份) │ 流动性评分 │ 管理人      │
├──────┼────────┼─────────────┼────────┼────────────┼────────────┼─────────────┤
│  #1  │ 159792 │ 港股通互联… │  SZSE  │    1003.94 │      100.0 │ 富国基金    │
│  #2  │ 510300 │ 300ETF      │  SSE   │     910.62 │      100.0 │ 华泰柏瑞    │
│  #3  │ 512170 │ 医疗ETF     │  SSE   │     778.13 │      100.0 │ 华宝基金    │
...
└──────┴────────┴─────────────┴────────┴────────────┴────────────┴─────────────┘

📊 统计信息

总规模: 6078.95 亿份
平均流动性评分: 100.0

🏆 流动性前三名

1. 港股通互联网ETF (159792)
   规模: 1003.94亿份, 评分: 100.0
   管理人: 富国基金管理有限公司
```

## 常见ETF特征

### 超大规模ETF (≥500亿份)

**特点**:
- 流动性极佳
- 跟踪误差小
- 价差极小
- 适合大额交易

**代表**:
- 沪深300ETF (510300) - 宽基
- 上证50ETF (510050) - 蓝筹
- 港股通互联网ETF (159792) - 港股科技

### 大规模ETF (100-500亿份)

**特点**:
- 流动性好
- 费率适中
- 品种丰富

**代表**:
- 中证500ETF (510500)
- 创业板ETF (159915)
- 医药医疗类ETF

### 中等规模ETF (10-100亿份)

**特点**:
- 细分行业主题
- 流动性尚可
- 适合主题投资

**代表**:
- 各行业主题ETF
- 策略指数ETF
- SmartBeta ETF

## 注意事项

### 1. 数据更新

- 规模数据: 定期更新(通常滞后几天)
- 成交量数据: 需要`--with-volume`参数
- 费率数据: 部分ETF使用默认值

### 2. 流动性评估

- 规模只是流动性的一个维度
- 建议结合成交额综合判断
- 新上市ETF规模可能较小但流动性好

### 3. 费率说明

- 显示的是管理费率(年化)
- 实际还有托管费(约0.10%)
- 交易还有买卖佣金

### 4. 投资建议

- 筛选结果仅供参考
- 需结合基本面分析
- 注意ETF跟踪的指数
- 考虑个人风险承受能力

## 与其他功能配合

### 1. 筛选 + 对比

```bash
# 先筛选出候选ETF
etf screen --top 5

# 然后详细对比
etf compare 510300 510500 159915 --format table
```

### 2. 筛选 + 分析

```bash
# 筛选后找到感兴趣的ETF
etf screen --min-scale 20

# 深入分析某个ETF
etf analyze 510300 --days 90
```

### 3. 筛选 + 交易建议

```bash
# 筛选候选
etf screen --with-volume --top 10

# 获取交易建议
etf suggest 510300 --days 60
```

### 4. 筛选 + 报告

```bash
# 筛选优质ETF
etf screen --min-scale 30

# 生成分析报告
etf report 510300 --format html --output 510300.html
```

## 数据来源

### 规模数据

- **上交所**: fund_etf_scale_sse
- **深交所**: fund_etf_scale_szse
- 更新频率: 定期(通常每周或每月)
- 准确性: 高

### 成交量数据

- **来源**: fund_etf_hist_em (东方财富)
- 计算方式: 最近30天日均成交额
- 注意: 需要额外时间获取

### 费率数据

- **来源**: 手动维护的费率表
- 覆盖范围: 主流ETF
- 其他ETF: 使用默认值0.60%

## 故障排除

### 问题: 未找到符合条件的ETF

**原因**: 筛选条件过于严格

**解决方案**:
```bash
# 放宽条件
etf screen --min-scale 2 --max-fee 1.0 --top 20
```

### 问题: 获取规模数据失败

**原因**: 数据源暂时不可用

**解决方案**:
1. 稍后重试
2. 检查网络连接
3. 非交易时间再试

### 问题: --with-volume很慢

**原因**: 需要逐个获取历史数据

**解决方案**:
- 减少筛选数量 `--top 5`
- 或不使用该参数(仅基于规模筛选)

## 总结

ETF筛选功能通过多维度评估,帮助你快速找到:

✅ 流动性好 - 规模大、成交活跃
✅ 费率低 - 降低持有成本
✅ 质量高 - 优质基金公司管理

**核心优势**:
- 一键筛选,省时省力
- 综合评分,科学客观
- 灵活配置,满足不同需求

**使用建议**:
- 定期筛选,更新持仓
- 多维度分析,避免单一指标
- 结合基本面,理性投资
